<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbwxnhm-fxAKRmLk825VdEjm6bD_UBw6AO-XnlXsRTaw-QsrgxAzjIv7SjUdNPd3F7yc1Q/exec";

  document.getElementById("suggestForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = e.target;
    const title = form.title.value.trim();
    const url = form.url.value.trim();
    const responseEl = document.getElementById("response");

    if (!title || !url) {
      responseEl.textContent = "❌ Please fill in all fields.";
      return;
    }

    responseEl.textContent = "⏳ Submitting...";

    try {
      const params = new URLSearchParams({
        method: "suggestLink",
        title,
        url
      });

      const res = await fetch(API_URL, {
        method: "POST",
        body: params,
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        }
      });

      const result = await res.text();

      if (result === "OK") {
        responseEl.textContent = "✅ Your link has been submitted for approval!";
        form.reset();
      } else {
        responseEl.textContent = "❌ Failed to submit link.";
      }
    } catch (err) {
      console.error(err);
      responseEl.textContent = "❌ An error occurred.";
    }
  });
</script>
